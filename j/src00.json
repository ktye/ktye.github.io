{"j.c":["typedef char C;typedef long I;","typedef struct a{I t,r,d[3],p[2];}*A;","#define P printf","#define R return","#define V1(f) A f(w)A w;","#define V2(f) A f(a,w)A a,w;","#define DO(n,x) {I i=0,_n=(n);for(;i\u003c_n;++i){x;}}","I *ma(n){R(I*)malloc(n*4);}mv(d,s,n)I *d,*s;{DO(n,d[i]=s[i]);}","tr(r,d)I *d;{I z=1;DO(r,z=z*d[i]);R z;}","A ga(t,r,d)I *d;{A z=(A)ma(5+tr(r,d));z-\u003et=t,z-\u003er=r,mv(z-\u003ed,d,r);R z;}","V1(iota){I n=*w-\u003ep;A z=ga(0,1,\u0026n);DO(n,z-\u003ep[i]=i);R z;}","V2(plus){I r=w-\u003er,*d=w-\u003ed,n=tr(r,d);A z=ga(0,r,d);"," DO(n,z-\u003ep[i]=a-\u003ep[i]+w-\u003ep[i]);R z;}","V2(from){I r=w-\u003er-1,*d=w-\u003ed+1,n=tr(r,d);"," A z=ga(w-\u003et,r,d);mv(z-\u003ep,w-\u003ep+(n**a-\u003ep),n);R z;}","V1(box){A z=ga(1,0,0);*z-\u003ep=(I)w;R z;}","V2(cat){I an=tr(a-\u003er,a-\u003ed),wn=tr(w-\u003er,w-\u003ed),n=an+wn;"," A z=ga(w-\u003et,1,\u0026n);mv(z-\u003ep,a-\u003ep,an);mv(z-\u003ep+an,w-\u003ep,wn);R z;}","V2(find){}","V2(rsh){I r=a-\u003er?*a-\u003ed:1,n=tr(r,a-\u003ep),wn=tr(w-\u003er,w-\u003ed);"," A z=ga(w-\u003et,r,a-\u003ep);mv(z-\u003ep,w-\u003ep,wn=n\u003ewn?wn:n);"," if(n-=wn)mv(z-\u003ep+wn,z-\u003ep,n);R z;}","V1(sha){A z=ga(0,1,\u0026w-\u003er);mv(z-\u003ep,w-\u003ed,w-\u003er);R z;}","V1(id){R w;}V1(size){A z=ga(0,0,0);*z-\u003ep=w-\u003er?*w-\u003ed:1;R z;}","pi(i){P(\"%d \",i);}nl(){P(\"\\n\");}","pr(w)A w;{I r=w-\u003er,*d=w-\u003ed,n=tr(r,d);DO(r,pi(d[i]));nl();"," if(w-\u003et)DO(n,P(\"\u003c \");pr(w-\u003ep[i]))else DO(n,pi(w-\u003ep[i]));nl();}","","C vt[]=\"+{~\u003c#,\";","A(*vd[])()={0,plus,from,find,0,rsh,cat},"," (*vm[])()={0,id,size,iota,box,sha,0};","I st[26]; qp(a){R a\u003e='a'\u0026\u0026a\u003c='z';}qv(a){R a\u003c'a';}","A ex(e)I *e;{I a=*e;"," if(qp(a)){if(e[1]=='=')R st[a-'a']=ex(e+2);a= st[ a-'a'];}"," R qv(a)?(*vm[a])(ex(e+1)):e[1]?(*vd[e[1]])(a,ex(e+2)):(A)a;}","noun(c){A z;if(c\u003c'0'||c\u003e'9')R 0;z=ga(0,0,0);*z-\u003ep=c-'0';R z;}","verb(c){I i=0;for(;vt[i];)if(vt[i++]==c)R i;R 0;}","I *wd(s)C *s;{I a,n=strlen(s),*e=ma(n+1);C c;"," DO(n,e[i]=(a=noun(c=s[i]))?a:(a=verb(c))?a:c);e[n]=0;R e;}","","//main(){C s[99];while(gets(s))pr(ex(wd(s)));}","j(s){pr(ex(wd(s)));}",""]}

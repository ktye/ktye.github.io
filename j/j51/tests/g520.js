NB. Copyright (c) 1989 1990, Roger K.W. Hui & K.E. Iverson
NB. Copyright (c) 1990-1992, Iverson Software Inc.
NB. All Rights Reserved.


NB. {y ------------------------------------------------------------------

NB. Boolean
a =. 1=?(1+?10)$2
b =. 1=?(1+?10)$2
({a;b) -: a,&.>/b

NB. literal
a =. a.{~97+?(1+?10)$26
b =. a.{~97+?(1+?10)$26
({a;b) -: a,&.>/b

NB. integer
a =. _40+?(1+?10)$100
b =. _40+?(1+?10)$100
({a;b) -: a,&.>/b
(i.v) -: v#."1>{i.&.>v =. >: ?7 7 7 7
(i.v) -: v#."1>{i.&.>v =. >: ?7 7 7 7
(i.v) -: v#."1>{i.&.>v =. >: ?7 7 7 7

NB. floating-point
a =. 0.1*_40+?(1+?10)$100
b =. 0.1*_40+?(1+?10)$100
({a;b) -: a,&.>/b

NB. complex
a =. ^0j0.1*_40+?(1+?10)$100
b =. ^0j0.1*_40+?(1+?10)$100
({a;b) -: a,&.>/b
b =. _40+?(1+?10)$100
({a;b) -: a,&.>/b

NB. boxed
a =. (1,}.0=?(#a)$4)<;.(1) a=._40+?(1+?20)$100
b =. (1,}.0=?(#b)$4)<;.(1) b=.0.1*_40+?(1+?20)$100
({(<a),<b) -: a<@,"0/b


NB. {y encore -----------------------------------------------------------

count   =. */@$@>
prod    =. */\.@}.@(,&1)
copy    =. */@[ $&> prod@[ (#,)&.> ]
catalog =. ;@:($&.>) $ count <"1@|:@copy ]

f =. { -: catalog

f 0 1;1=?2 3$6
f (3 4$'foobar');'lieben'
f (?5$105);?2 3$10
f o.&.>(?5$105);2 3$10
f 3j4;5j6 7 8 9
f 0 1;2;3.4;5j6 7


NB. x{y -----------------------------------------------------------------

a -: 0{a=.?2
a -: 0{a=.(?#a.){a.
a -: 0{a=.?1e9
a -: 0{a=.o.?1e9
a -: 0{a=.r.?1e9
a -: 0{a=.<?1e9
a -: 0{a=.<!.(?4$1e9) 'asdf'

NB. Boolean
a=.1=?2 3 4$2
(|.a)      -: 1 0{a
(2{."1 a)  -: 0 1{"1 a
(_2{."2 a) -: _2 _1{"2 a
(($0)$,_1 _1 _1{.a) -: (<_1 _1 _1){a

p=.?(?(?4)$5)$2
q=.?(?(?4)$5)$3
r=.?(?(?4)$5)$4
i=.p;q;r
(;$&.>i)      -: $(<i){a
(($p),3 4)    -: $(<<p){a
(($p),($q),4) -: $(<p;q){a

NB. literal
a=.a.{~?2 3 4$256
(|.a)      -: 1 0{a
(2{."1 a)  -: 0 1{"1 a
(_2{."2 a) -: _2 _1{"2 a
(($0)$,_1 _1 _1{.a) -: (<_1 _1 _1){a

p=.?(?(?4)$5)$2
q=.?(?(?4)$5)$3
r=.?(?(?4)$5)$4
i=.p;q;r
(;$&.>i)      -: $(<i){a
(($p),3 4)    -: $(<<p){a
(($p),($q),4) -: $(<p;q){a

NB. integer
a=.?2 3 4$10000
(|.a)      -: 1 0{a
(2{."1 a)  -: 0 1{"1 a
(_2{."2 a) -: _2 _1{"2 a
(($0)$,_1 _1 _1{.a) -: (<_1 _1 _1){a

p=.?(?(?4)$5)$2
q=.?(?(?4)$5)$3
r=.?(?(?4)$5)$4
i=.p;q;r
(;$&.>i)      -: $(<i){a
(($p),3 4)    -: $(<<p){a
(($p),($q),4) -: $(<p;q){a

NB. floating point
a=.o.?2 3 4$10000
(|.a)      -: 1 0{a
(2{."1 a)  -: 0 1{"1 a
(_2{."2 a) -: _2 _1{"2 a
(($0)$,_1 _1 _1{.a) -: (<_1 _1 _1){a

p=.?(?(?4)$5)$2
q=.?(?(?4)$5)$3
r=.?(?(?4)$5)$4
i=.p;q;r
(;$&.>i)      -: $(<i){a
(($p),3 4)    -: $(<<p){a
(($p),($q),4) -: $(<p;q){a

NB. complex
a=.^0j1*?2 3 4$200
(|.a)      -: 1 0{a
(2{."1 a)  -: 0 1{"1 a
(_2{."2 a) -: _2 _1{"2 a
(($0)$,_1 _1 _1{.a) -: (<_1 _1 _1){a

p=.?(?(?4)$5)$2
q=.?(?(?4)$5)$3
r=.?(?(?4)$5)$4
i=.p;q;r
(;$&.>i)      -: $(<i){a
(($p),3 4)    -: $(<<p){a
(($p),($q),4) -: $(<p;q){a

NB. boxed
a=.2 3 4$;:'(($p),($q),4)-:$(<p;q){a'
(|.a)      -: 1 0{a
(2{."1 a)  -: 0 1{"1 a
(_2{."2 a) -: _2 _1{"2 a
(($0)$,_1 _1 _1{.a) -: (<_1 _1 _1){a

p=.?(?(?4)$5)$2
q=.?(?(?4)$5)$3
r=.?(?(?4)$5)$4
i=.p;q;r
(;$&.>i)      -: $(<i){a
(($p),3 4)    -: $(<<p){a
(($p),($q),4) -: $(<p;q){a


NB. x{y complementary indexing ------------------------------------------

jot=.<$0

NB. Boolean
a =. 1=?2 3 4$2
(1{.a)       -: (<<<1){a
(1{.a)       -: (<<<1 _1){a
(1 0 1#"2 a) -: (<jot;<<1){a

NB. literal
a =. a.{~?2 3 4$256
(1{.a)       -: (<<<1){a
(1{.a)       -: (<<<1 _1){a
(1 0 1#"2 a) -: (<jot;<<_2){a

NB. integer
a =. ?2 3 4$256
(1{.a)       -: (<<<1){a
(1{.a)       -: (<<<1 _1){a
(1 0 1#"2 a) -: (<jot;<<1){a

NB. floating point
a =. o.?2 3 4$256
(1{.a)       -: (<<<1){a
(1{.a)       -: (<<<1 _1){a
(1 0 1#"2 a) -: (<jot;<<_2){a

NB. complex
a =. ^0j1*?2 3 4$256
(1{.a)       -: (<<<1){a
(1{.a)       -: (<<<1 _1){a
(1 0 1#"2 a) -: (<jot;<<1){a

NB. boxed
a =. 2 3 4$;:'+/..*(1 0 1#"2 a)-:(<jot;<<0){a'
(1{.a)       -: (<<<1){a
(1{.a)       -: (<<<1 _1){a
(1 0 1#"2 a) -: (<jot;<<_2){a

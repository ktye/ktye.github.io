NB. Copyright (c) 1989 1990, Roger K.W. Hui & K.E. Iverson
NB. Copyright (c) 1990-1992, Iverson Software Inc.
NB. All Rights Reserved.


NB. ~:y -----------------------------------------------------------------

box =. '' : '<!.x. y.'

(,1) -: ~:0
(,1) -: ~:'a'
(,1) -: ~:243
(,1) -: ~:2.71828
(,1) -: ~:3j4.54e2
(,1) -: ~:<i.12
(,1) -: ~:'abc' box ?9

(,1) -: ~:,1
(,1) -: ~:1 3 4$a.
(,1) -: ~:i.1 2 3 4
(,1) -: ~:o.i.1 2 3
(,1) -: ~:r.i.1 0 3
(,1) -: ~:1 3 2$;:'Cogito, ergo sum.'
(,1) -: ~:,:'foobar' box 7

''   -: ~:0$0
''   -: ~:0 3 4$a.
''   -: ~:i.0 2 3 4
''   -: ~:o.i.0 2 3
''   -: ~:^0j1*i.0 2 0 3
''   -: ~:0 3 2$;:'Cogito, ergo sum.'
''   -: ~:0 3$7 box 'foobar'

(5{.1) -: ~:5#1
(5{.1) -: ~:5#1 3 4$a.
(5{.1) -: ~:5#i.1 2 3 4
(5{.1) -: ~:5#o.i.1 2 3
(5{.1) -: ~:5#^0j1*i.1 0 3
(5{.1) -: ~:5#1 3 2$;:'Cogito, ergo sum.'
(5{.1) -: ~:5#(?3 4$100) box ?3 4$100

type =. 3!:0
test =. '(1=type b) *. (($b)-:,#y.) *. b-:(i.#y.)=i.~y. [ b=.~:y.' : ''

test ?2
test a.{~?#a.
test ?2023
test o.?2023
test j./?2$3324
test ('foo';'upon';'thee'){~?3
test (3 4 5 box "0 1?3 4$3){~?3

test ?20 2$2
test a.{~50+?40 2$3
test ?20 2$3
test o.?20 2$3
test j./?2 82 2$3
test ('foo';'upon';'thee'){~?20 2$3
test (3 4 5 box "0 1?3 4$3){~?120 2$3


NB. x~:y ----------------------------------------------------------------

box =. '' : '<!.x. y.'

NB. Boolean
0 1 1 0 -: 0 0 1 1~:0 1 0 1

NB. literal
(($t)$0) -: t ~: t=.a.{~?2 3 4$#a.
(($t)$1) -: (?($t)$2)          ~: t=.a.{~?2 3 4$#a.
(($t)$1) -: (_5e8+?($t)$1e9)   ~: t=.a.{~?2 3 4$#a.
(($t)$1) -: (o._5e8+?($t)$1e9) ~: t=.a.{~?2 3 4$#a.
(($t)$1) -: (r._5e8+?($t)$1e9) ~: t=.a.{~?2 3 4$#a.
(($t)$1) -: (($t)$;:'8-+.abc') ~: t=.a.{~?2 3 4$#a.
(($t)$1) -: (4 5 box"0?2 3 4$9)~: t=.a.{~?2 3 4$#a.

NB. integer
(($t)$0) -: t ~: t=._1e9+?2 3 4$2e9
(a~:b)-:0~:a-b     [ a=._5+?200$10         [ b=._5+?200$10
(a~:b)-:a~:b{0 1 2 [ a=.(?100$2){0 1 2     [ b=.?100$2
(a~:b)-:a~:}.3.4,b [ a=.?200$10            [ b=.?200$10

NB. real
(($t)$0) -: t ~: t=.o._1e9+?2 3 4$2e9
(a~:b)-:0~:a-b     [ a=.o._5+?200$10       [ b=.o._5+?200$10
(a~:b)-:a~:}.3.4,b [ a=.}.3.4,?100$2       [ b=.?100$2
(a~:b)-:a~:}.3.4,b [ a=.}.3.4,_5+?200$10   [ b=._5+?200$10
(a~:b)-:a~:}.3j4,b [ a=.o._5+?200$10       [ b=.o._5+?200$10

NB. complex
(($t)$0) -: t ~: t=.j./_1e9+?2 3 4$2e9
(a~:b)-:0~:a-b     [ a=.r._5+?200$10       [ b=.r._5+?200$10
(a~:b)-:a~:}.3j4,b [ a=.}.3j4,?100$2       [ b=.?100$2
(a~:b)-:a~:}.3j4,b [ a=.}.3j4,_5+?200$10   [ b=._5+?200$10
(a~:b)-:a~:}.3j4,b [ a=.}.3j4,o._5+?200$10 [ b=.o._5+?200$10

NB. boxed
(($t)$0) -: t ~: t=.<"1?2 3 4 5$10
(($t)$0) -: (}.(3 box 4),t) ~: t=.<"1?2 3 4$10
(($t)$1) -: (?($t)$2)          ~: t=.<"1?2 3 4$10
(($t)$1) -: (($t)$'8-+.abc')   ~: t=.<"1?2 3 4$10
(($t)$1) -: (_5e8+?($t)$1e9)   ~: t=.<"1?2 3 4$10
(($t)$1) -: (o._5e8+?($t)$1e9) ~: t=.<"1?2 3 4$10
(($t)$1) -: (r._5e8+?($t)$1e9) ~: t=.<"1?2 3 4$10
(($t)$1) -: ((1+?($t)$10) box"0 1>t) ~: t=.<"1?2 3 4$10

NB. box with key
(($t)$0) -: t ~: t=.(?2 3 4$100) box 0 1?2 3 4 5$10
(($t)$1) -: (?($t)$2)          ~: t=.(>:?2 3$10) box"0 1?2 3 4$10
(($t)$1) -: (($t)$'8-+.abc')   ~: t=.(>:?2 3$10) box"0 1?2 3 4$10
(($t)$1) -: (_5e8+?($t)$1e9)   ~: t=.(>:?2 3$10) box"0 1?2 3 4$10
(($t)$1) -: (o._5e8+?($t)$1e9) ~: t=.(>:?2 3$10) box"0 1?2 3 4$10
(($t)$1) -: (r._5e8+?($t)$1e9) ~: t=.(>:?2 3$10) box"0 1?2 3 4$10
(($t)$1) -: (<"1>t)            ~: t=.(>:?2 3$10) box"0 1?2 3 4$10

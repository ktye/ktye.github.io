#include"a.h"//fF[+-!#,@] atom/vector 1byteint 1bytetoken  no(memmanage parser tokens ..) clang-13 -Os -oa a.c -w 
#define r(n,e) _(u r=a(n);i(n,ri=e)r)
f(w,write(1,ax?(u)&x:x,ax?1:strlen(x)))
c b[12];
f(si,sprintf(b,"%d ",128>x?x:x-256);b)
f(wi,w(si(x)))
f(w_,$(ax,wi(x))i(nx,wi(xi))w(10))

F(err,w(f);w(58);w(x);w(10);96)
G(m,(u)memcpy((void*)x,(void*)y,f))
f(a,c*s=malloc(x+1);*s++=x;(u)s)
f(foo,Qz(1)0)
f(sub,ax?(c)-x:r(nx,-xi))
f(ind,Qr(!ax)r(x,i))
f(cnt,Qr(ax)nx)
f(cat,Qr(!ax)r(1,x))
F(Add,ax?af?f+x:Add(x,f):r(nx,(af?f:fi)+xi))
F(Sub,Add(f,sub(x)))
F(Ind,Qr(!f)r(nx,xi%f))
F(Cnt,Qr(!af)r(f,ax?x:xi))
F(Cat,f=af?cat(f):f;x=ax?cat(x):x;u r=a(nf+nx);m(nx,r+nf,x);m(nf,r,f))
F(At,Qr(af)ax?sf[x]:r(nx,sf[xi]))f(at,At(x,0))
char*V=" +-!#,@";u(*f[])()={0,foo,sub,ind,cnt,cat,at},(*F[])()={0,Add,Sub,Ind,Cnt,Cat,At},U[26];
f(v,(strchr(V,x)?:V)-V)
f(n,10>x-48?x-48:U[x-97])
us(e,u i=*s++;v(i)?x(e(s),Q(x)f[v(i)](x)):x(n(i),*s?y(e(s+1),Q(y)F[v(*s)](x,y)):x))
int main(){char s[99];while(1)if(w(32),s[read(0,s,99)-1]=0,*s)w_(e(s));}
